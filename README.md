# PAYable IPG Mobile APIs

#### 1. Generate Payment URL 

GET: `https://us-central1-payable-mobile.cloudfunctions.net/ipg/sandbox/`

Body: `GET`

```url
?merchantKey=XXXXXXXXXX
&merchantToken=XXXXXXXXXXXXXXXXXXXX
&refererUrl=https://www.example.com
&logoUrl=https://example.com/logo.png

// (Optional) The card details will be notified with POST request
&notificationUrl=https://example.com/request-test 

// (Optional) Once the payment is done this URL will be redirected with `resultIndicator` 
// which is required to check the payment status
&returnUrl=https://example.com/status-view 

&amount=100.00
&currencyCode=LKR
&orderDescription=PAYable_Mobile_IPG

&customerFirstName=Aslam
&customerLastName=Anver
&customerEmail=aslam@example.lk
&customerMobilePhone=0777123456
&billingAddressStreet=Hill Street
&billingAddressCity=Dehiwala
&billingAddressCountry=LK
&billingAddressPostcodeZip=10350
&billingAddressStateProvince=Western

// Shipping details are optional
&shippingContactFirstName=Aslam
&shippingContactLastName=Anver
&shippingContactEmail=aslam@example.lk
&shippingContactMobilePhone=0777123456
&shippingAddressStreet=Hill Street
&shippingAddressCity=Dehiwala
&shippingAddressCountry=LK
&shippingAddressPostcodeZip=10350
&shippingAddressStateProvince=Western

// json - JSON response which contains the payment page URL
// html - The payment page will be loaded
&responseType=json
```

Response:
```json
{
    "status": "PENDING",
    "uid": "969077C7-EBB5-428A-9F09-FF195560F200",
    "successIndicator": "9c8d273567be4c58",
    "paymentPage": "https://us-central1-payable-mobile.cloudfunctions.net/ipg/sandbox/?uid=969077C7-EBB5-428A-9F09-FF195560F200"
}
```

#### 2. Payment Page

GET: `https://us-central1-payable-mobile.cloudfunctions.net/ipg/sandbox/`

Body: `GET`

```url
?uid=969077C7-EBB5-428A-9F09-FF195560F200
```

Response: <br/>
![](https://i.imgur.com/p0aewHZ.png)

#### 3. Payment Status

GET: `https://us-central1-payable-mobile.cloudfunctions.net/ipg/sandbox/status-view`

Body: `GET`

```url
?uid=C7ADE26D-B62C-4AC5-AE44-19F1C3139F84
&resultIndicator=5752890e6cae4be4

// Json reponse or HTML page with payment status
&responseType=json
```

Response:

```json
{
    "status": "SUCCESS",
    "data": {
        "cardHolderName": "HNB.S 776",
        "statusCode": 1,
        "payableCurrency": "LKR",
        "payableOrderId": "oid-2b7b4069-1ef2-11ed-baa9-31321920b630",
        "merchantKey": "A75BCD8EF30E529A",
        "cardNumber": "511111xxxxxx1118",
        "txType": "ONE_TIME_PAYMENT",
        "paymentType": 1,
        "payableTransactionId": "86a89f17-1ef2-11ed-bd7a-2db910859eae",
        "invoiceNo": "INV1660826095925",
        "custom1": "",
        "payableAmount": "100.00",
        "paymentScheme": "MASTERCARD",
        "checkValue": "395E8610AE334B47EE0D3F31E5CC9B6C3C7AE454C3AAD5999CCAD7C9C4E8ADB56A52BA273AAC0D0AFE48EF4AD13A4B05FF7291E63C1BF30AE4DA1C3E1DA958C6",
        "paymentMethod": 1,
        "custom2": "",
        "statusMessage": "SUCCESS"
    }
}
```

HTML <br/>

![](https://i.imgur.com/9GlYUdL.png)



## Parameters Validation Guide


|**##**|**Field Name**|**Type**|**Size**|**Description**|**\*\*\***|
| :- | :- | :- | :- | :- | :- |
|1 |merchantKey |String |Min=4 <br>Max=200 |Merchant Key of the Merchant<br>Unique identifier for the Merchant [Given by PAYable]<br>**Format: a-zA-Z0-9**|M |
|2 |merchantToken|String |<p>Min=4 </p><p>Max=200</p>|<p>Merchant Token of the Merchant<br>Unique identifier for the Merchant [Generated by PAYable IPG portal]</p><p>**Format: a-zA-Z0-9**</p>|M |
|3 |refererUrl|String |<p>Min=11</p><p>Max=300 </p>|<p>Unique URL that used for portal account creation</p><p>**Format - Valid HTTPS Web URL**</p>|M |
|4|logoUrl|String|<p>Min=11</p><p>Max=300</p>|<p>Merchant Logo URL </p><p>**Format - Valid HTTPS Web URL**</p>|M|
|5|notificationUrl |String |Max: 300 |PAYable Update Transaction API Endpoint URL<br>**Format - Valid HTTPS Web URL** |O|
|6|returnUrl|String|<p>Min: 11</p><p>Max: 300</p>|<p>Merchant’s Return URL </p><p>**Format - Valid HTTPS Web URL**</p>|M|
|7|buttonType|int|1-10||O|
|8|statusViewDuration|long|0-500||O|
|9|Amount |long||Final amount of the order |M |
|10|currencyCode|String|Min:3</br>Max :3 |Currency Code: LKR|M|
|11|orderDescription|String|<p>Min:1</p><p>Max :125</p>|<p>Small Description for the Order</p><p>**Format: a-zA-Z0-9 and dash, dot, comma, forward slash, parenthesis, underscore, & spaces**</p>|M|
|12|customerFirstName |String |Min=1 Max=50 |<p>Customer’s First Name </p><p>**Format: a-zA-Z0-9, space, dot**</p>|M |
|13|customerLastName |String |Min=1 Max=50 |<p>Customer’s Last Name </p><p>**Format: a-zA-Z0-9, space, dot**</p>|M |
|14|customeremail|String |Min=5 Max=100 |<p>Customer’s Email Address </p><p>**Format - A valid email address format** </p>|M |
|15|customerMobilePhone |String |Min=10 Max=15 |<p>Customer’s Mobile Phone Number </p><p>**Format: Numbers (0-9) , + ,Space**</p><p>` `**Ex: 07XXXXXXXX, +XXxxxxxxxxx**</p>|M |
|16|billingAddressStreet|String|Min=1 Max=100|<p>Billing Details - Billing Address - Street </p><p>**Format: a-zA-Z0-9 and dash, dot, comma, forward slash, parenthesis, underscore, & spaces**</p>|M|
|17 |billingAddressCity |String |Min=1 Max=100 |<p>Billing Details - Billing Address – City </p><p>**Format: a-zA-Z0-9 and spaces** </p>|M |
|18 |billingAddressCountry|String |<p>Min=2 </p><p>Max=3</p>|<p>Billing Details - Billing Address - Country </p><p>**Format: A-Z** </p>|O |
|19 |billingAddressPostcodeZip |String |Min=1 Max=10 |Billing Details - Billing Address - Postal Code<br>**Format: a-zA-Z0-9 and dash**|M |
|20 |billingAddressStateProvince |String |Max=25 |Billing Details - Billing Address - Province<br>**Format: a-zA-Z0-9 and dash**|O |
|21|shippingContactFirstName|String|Max=50|<p>Shipping Details - Contact Last Name </p><p>**Format: a-zA-Z0-9, space, dot** </p>|O|
|22|shippingContactLastName|String|Max=50|<p>Shipping Details - Contact Last Name </p><p>**Format: a-zA-Z0-9, space, dot** </p>|O|
|23|shippingcontactemail|String|Max=100|<p>Shipping Details - Contact Email Address </p><p>**Format: Standard email address format**</p>|O|
|24|shippingContactMobilePhone|String|Min=10 Max=15|<p>Shipping Details – Contact Mobile Phone Number</p><p>**Format: Numbers (0-9), +, Space**</p><p>` `**Ex: 07XXXXXXXX, +XXxxxxxxxxx**</p>|O|
|25|shippingAddressStreet|String|Max=100|<p>Shipping Details - Shipping Address - Street </p><p>**Format: a-zA-Z0-9 and dash, dot, comma, forward slash, parenthesis, underscore, & spaces**</p>|O|
|26|shippingAddressCity|String|Max=100|Shipping Details - Shipping Address - City<br>**Format: a-zA-Z0-9 and spaces** |O|
|27|shippingAddressCountry|String|<p>Min=2 </p><p>Max=3</p>|<p>Shipping Details - Shipping Address - Country </p><p>**Format: A-Z**</p>|O|
|28|shippingAddressPostcodeZip|String|Max=10|<p>Shipping Details - Shipping Address - Postal Code </p><p>**Format: a-zA-Z0-9 and dash**</p>|O|
|29|shippingAddressStateProvince|String|Max=20|<p>Shipping Details - Shipping Address - Province </p><p>**Format: a-zA-Z0-9 and spaces**</p>|O|
|30|responseType|String||` `One of these Strings: [**json|html]**|M|



